<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”„ë¡ íŠ¸ì—”ë“œ API í…ŒìŠ¤íŠ¸ - ì‹¤ì œ ì²­ë…„ì •ì±… ë°ì´í„°</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Noto Sans KR', sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #333; margin-bottom: 20px; }
        .info-box { background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .info-box code { background: #1976d2; color: white; padding: 2px 6px; border-radius: 4px; }
        .test-section { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        button { background: #4caf50; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin-right: 10px; margin-bottom: 10px; }
        button:hover { background: #45a049; }
        .result { background: #f9f9f9; padding: 15px; border-radius: 4px; margin-top: 15px; border-left: 4px solid #4caf50; }
        .error { border-left-color: #f44336; background: #ffebee; }
        .policy-card { background: white; border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .policy-title { font-size: 18px; font-weight: bold; color: #1976d2; margin-bottom: 10px; }
        .policy-info { margin: 5px 0; color: #666; }
        .real-data-badge { background: #ff9800; color: white; padding: 3px 8px; border-radius: 12px; font-size: 12px; display: inline-block; margin-left: 10px; }
        pre { background: #263238; color: #aed581; padding: 15px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ í”„ë¡ íŠ¸ì—”ë“œ API í…ŒìŠ¤íŠ¸ <span class="real-data-badge">ì‹¤ì œ ë°ì´í„°</span></h1>
        
        <div class="info-box">
            <h3>ğŸ“Œ API ì„œë²„ ì •ë³´</h3>
            <p>Public URL: <code>https://3001-ie8kwy33uts4uea5lzj2o-6532622b.e2b.dev</code></p>
            <p>í”„ë¡ì‹œ ì„¤ì • ì‹œ: <code>/api/*</code> â†’ ìœ„ URLë¡œ í¬ì›Œë”©</p>
        </div>

        <!-- 1. ì „ì²´ ì •ì±… ì¡°íšŒ -->
        <div class="test-section">
            <h2>1ï¸âƒ£ ì „ì²´ ì •ì±… ì¡°íšŒ (ì‹¤ì œ ì„œìš¸ì‹œ ì²­ë…„ì •ì±…)</h2>
            <button onclick="fetchAllPolicies()">ì •ì±… ëª©ë¡ ê°€ì ¸ì˜¤ê¸°</button>
            <div id="all-policies-result"></div>
        </div>

        <!-- 2. íŠ¹ì • ì •ì±… ìƒì„¸ ì¡°íšŒ -->
        <div class="test-section">
            <h2>2ï¸âƒ£ ì •ì±… ìƒì„¸ ì¡°íšŒ</h2>
            <button onclick="fetchPolicyDetail('R2024-001')">ì„œìš¸ì‹œ ì²­ë…„ì›”ì„¸ ì§€ì› ìƒì„¸ë³´ê¸°</button>
            <button onclick="fetchPolicyDetail('R2024-002')">ì²­ë…„ì·¨ì—…ì‚¬ê´€í•™êµ ìƒì„¸ë³´ê¸°</button>
            <div id="policy-detail-result"></div>
        </div>

        <!-- 3. êµ¬ë³„ ì •ì±… ì¡°íšŒ -->
        <div class="test-section">
            <h2>3ï¸âƒ£ êµ¬ë³„ ì •ì±… ì¡°íšŒ</h2>
            <button onclick="fetchDistrictPolicies('Gangnam-gu')">ê°•ë‚¨êµ¬</button>
            <button onclick="fetchDistrictPolicies('Seocho-gu')">ì„œì´ˆêµ¬</button>
            <button onclick="fetchDistrictPolicies('Gangdong-gu')">ê°•ë™êµ¬</button>
            <div id="district-result"></div>
        </div>

        <!-- 4. ê³ ê¸‰ ê²€ìƒ‰ -->
        <div class="test-section">
            <h2>4ï¸âƒ£ ê³ ê¸‰ ê²€ìƒ‰ (ë³µí•© ì¡°ê±´)</h2>
            <button onclick="advancedSearch('ì£¼ê±°', 'ì›”ì„¸')">ì£¼ê±° + ì›”ì„¸</button>
            <button onclick="advancedSearch('ì¼ìë¦¬', 'êµìœ¡')">ì¼ìë¦¬ + êµìœ¡</button>
            <button onclick="advancedSearch('ì°½ì—…', '')">ì°½ì—… ì „ì²´</button>
            <div id="advanced-search-result"></div>
        </div>

        <!-- 5. í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì˜ˆì œ -->
        <div class="test-section">
            <h2>5ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì˜ˆì œ</h2>
            <h3>React/TypeScript ì˜ˆì œ:</h3>
            <pre>
// Vite í”„ë¡ì‹œ ì„¤ì • (vite.config.ts)
export default {
  server: {
    proxy: {
      '/api': {
        target: 'https://3001-ie8kwy33uts4uea5lzj2o-6532622b.e2b.dev',
        changeOrigin: true
      }
    }
  }
}

// API í˜¸ì¶œ ì½”ë“œ
const response = await fetch('/api/policies?page=0&size=10');
const data = await response.json();
console.log('ì‹¤ì œ ì •ì±…:', data.content);
            </pre>
        </div>
    </div>

    <script>
        // API Base URL - ì§ì ‘ í˜¸ì¶œ
        const API_BASE = 'https://3001-ie8kwy33uts4uea5lzj2o-6532622b.e2b.dev';

        // 1. ì „ì²´ ì •ì±… ì¡°íšŒ
        async function fetchAllPolicies() {
            const resultDiv = document.getElementById('all-policies-result');
            resultDiv.innerHTML = 'ë¡œë”© ì¤‘...';
            
            try {
                const response = await fetch(`${API_BASE}/api/policies?page=0&size=5`);
                const data = await response.json();
                
                let html = `<div class="result">
                    <h3>âœ… ì„±ê³µ! ì´ ${data.totalElements}ê°œì˜ ì‹¤ì œ ì •ì±…</h3>`;
                
                data.content.forEach(policy => {
                    html += `
                        <div class="policy-card">
                            <div class="policy-title">${policy.policyName}</div>
                            <div class="policy-info">ğŸ“Œ ì •ì±…ë²ˆí˜¸: ${policy.policyNo}</div>
                            <div class="policy-info">ğŸ’° ì§€ì›ë‚´ìš©: ${policy.supportContent}</div>
                            <div class="policy-info">ğŸ‘¥ ì—°ë ¹: ${policy.minAge}-${policy.maxAge}ì„¸</div>
                            <div class="policy-info">ğŸ“… ì‹ ì²­ê¸°ê°„: ${policy.applicationPeriod}</div>
                            <div class="policy-info">ğŸ”— ì‹ ì²­: <a href="${policy.applicationSite}" target="_blank">${policy.applicationSite}</a></div>
                            <div class="policy-info">ğŸ‘ï¸ ì¡°íšŒìˆ˜: ${policy.viewCount}</div>
                        </div>`;
                });
                
                html += '</div>';
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = `<div class="result error">âŒ ì—ëŸ¬: ${error.message}</div>`;
            }
        }

        // 2. ì •ì±… ìƒì„¸ ì¡°íšŒ
        async function fetchPolicyDetail(policyNo) {
            const resultDiv = document.getElementById('policy-detail-result');
            resultDiv.innerHTML = 'ë¡œë”© ì¤‘...';
            
            try {
                const response = await fetch(`${API_BASE}/api/policies/${policyNo}`);
                const policy = await response.json();
                
                resultDiv.innerHTML = `
                    <div class="result">
                        <h3>ğŸ“‹ ${policy.policyName}</h3>
                        <div class="policy-info"><strong>ì •ì±…ë²ˆí˜¸:</strong> ${policy.policyNo}</div>
                        <div class="policy-info"><strong>ì •ì±…ì„¤ëª…:</strong> ${policy.policySummary}</div>
                        <div class="policy-info"><strong>ë¶„ì•¼:</strong> ${policy.policyField}</div>
                        <div class="policy-info"><strong>ì§€ì›ë‚´ìš©:</strong> ${policy.supportContent}</div>
                        <div class="policy-info"><strong>ìš´ì˜ê¸°ê°„:</strong> ${policy.operationPeriod}</div>
                        <div class="policy-info"><strong>ì‹ ì²­ê¸°ê°„:</strong> ${policy.applicationPeriod}</div>
                        <div class="policy-info"><strong>ì§€ì›ê·œëª¨:</strong> ${policy.supportScale}</div>
                        <div class="policy-info"><strong>ì†Œë“ì¡°ê±´:</strong> ${policy.incomeCondition}</div>
                        <div class="policy-info"><strong>ì‹ ì²­ë°©ë²•:</strong> ${policy.applicationProcess}</div>
                        <div class="policy-info"><strong>í•„ìš”ì„œë¥˜:</strong> ${policy.requiredDocuments}</div>
                        <div class="policy-info"><strong>ì¡°íšŒìˆ˜:</strong> ${policy.viewCount}</div>
                    </div>`;
            } catch (error) {
                resultDiv.innerHTML = `<div class="result error">âŒ ì—ëŸ¬: ${error.message}</div>`;
            }
        }

        // 3. êµ¬ë³„ ì •ì±… ì¡°íšŒ
        async function fetchDistrictPolicies(district) {
            const resultDiv = document.getElementById('district-result');
            resultDiv.innerHTML = 'ë¡œë”© ì¤‘...';
            
            try {
                const response = await fetch(`${API_BASE}/api/district-policies?districts=${district}`);
                const data = await response.json();
                
                const policies = data.data[district] || [];
                
                let html = `<div class="result">
                    <h3>ğŸ“ ${district} ì •ì±… (${policies.length}ê°œ)</h3>`;
                
                policies.forEach(policy => {
                    html += `
                        <div class="policy-card">
                            <div class="policy-title">${policy.title}</div>
                            <div class="policy-info">ğŸ·ï¸ ì¹´í…Œê³ ë¦¬: ${policy.category}</div>
                            <div class="policy-info">ğŸ‘¥ ëŒ€ìƒ: ${policy.target}</div>
                            <div class="policy-info">ğŸ“… ë§ˆê°: ${policy.deadline}</div>
                            <div class="policy-info">ğŸ“ ${policy.description}</div>
                        </div>`;
                });
                
                html += '</div>';
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = `<div class="result error">âŒ ì—ëŸ¬: ${error.message}</div>`;
            }
        }

        // 4. ê³ ê¸‰ ê²€ìƒ‰
        async function advancedSearch(field, keyword) {
            const resultDiv = document.getElementById('advanced-search-result');
            resultDiv.innerHTML = 'ë¡œë”© ì¤‘...';
            
            try {
                const response = await fetch(`${API_BASE}/api/policies/search/advanced`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        policyField: field,
                        keyword: keyword,
                        page: 0,
                        size: 5
                    })
                });
                const data = await response.json();
                
                let html = `<div class="result">
                    <h3>ğŸ” ê²€ìƒ‰ ê²°ê³¼: ${data.totalElements}ê°œ (${field} ${keyword ? '+ ' + keyword : ''})</h3>`;
                
                data.content.forEach(policy => {
                    html += `
                        <div class="policy-card">
                            <div class="policy-title">${policy.policyName}</div>
                            <div class="policy-info">ğŸ·ï¸ ë¶„ì•¼: ${policy.policyField}</div>
                            <div class="policy-info">ğŸ’° ${policy.supportContent}</div>
                        </div>`;
                });
                
                html += '</div>';
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = `<div class="result error">âŒ ì—ëŸ¬: ${error.message}</div>`;
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ ì •ì±… ëª©ë¡ í‘œì‹œ
        window.onload = () => {
            fetchAllPolicies();
        };
    </script>
</body>
</html>